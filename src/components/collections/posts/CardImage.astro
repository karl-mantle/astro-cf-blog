---
import type { ImageMetadata } from "astro";
import type { HTMLAttributes } from "astro/types";
import { Picture } from "astro:assets";
import { Icon } from "astro-icon/components";
import { imagesConfig } from "~/site.config";

interface Props extends HTMLAttributes<"li"> {
  description: string;
  heading: string;
  href: string;
  image?: {
    alt: string | null;
    src: ImageMetadata;
  };
  loading?: "eager" | "lazy";
}

const { description, heading, href, image, loading }: Props = Astro.props;
---

<li>
  <a
    class="group/card text-mikado-50 focus-visible:bg-focus-color bg-mikado-950 relative flex h-full min-h-64 flex-col overflow-hidden border-transparent hover:text-white focus-visible:border-2 focus-visible:text-black"
    href={href}
  >
    <div
      class="z-5 flex min-h-40 flex-grow flex-col gap-2 rounded-xl p-4 backdrop-blur-[1px] transition duration-300 group-hover/card:backdrop-blur-xs group-focus-visible/card:backdrop-blur-xs"
    >
      <div class="flex justify-between gap-4">
        <h3>{heading}</h3>
        <Icon
          name="material-symbols:arrow-right-alt"
          height={21}
          width={21}
          class="mt-0.5 min-w-5 transition-transform duration-300 group-hover/card:-rotate-45 group-focus-visible/card:-rotate-45"
        />
      </div>
      <p class="text-sm">{description}</p>
    </div>

    {
      image && (
        <Picture
          alt={image.alt ?? ""}
          class="absolute inset-0 h-full object-cover opacity-50 transition-opacity duration-300 group-focus-visible/card:opacity-25"
          format="webp"
          loading={loading ?? "lazy"}
          sizes={imagesConfig.third.sizes}
          src={image.src}
          widths={imagesConfig.third.widths}
        />
      )
    }
  </a>
</li>
