---
import type { ImageMetadata } from "astro";
import type { HTMLAttributes } from "astro/types";
import { Picture } from "astro:assets";
import { Icon } from "astro-icon/components";
import { imagesConfig } from "~/site.config";
import Date from "~/components/ui/Date.astro";

interface Props extends HTMLAttributes<"li"> {
  date: Date;
  description: string;
  heading: string;
  href: string;
  image?: {
    alt: string | null;
    src: ImageMetadata;
  };
  loading?: "eager" | "lazy";
}

const { date, description, heading, href, image, loading }: Props = Astro.props;
---

<li>
  <a
    class="group/card bg-mikado-200 dark:bg-mikado-800 text-mikado flex h-full flex-col-reverse"
    href={href}
  >
    <div class="flex flex-grow flex-col gap-2 p-4">
      <h2 class="text-lg md:text-xl">{heading}</h2>
      <Date date={date} />
      <p>{description}</p>
      <span
        class="group-hover/card:border-mikado-950 group-focus-visible/card:bg-focus-color group-hover/card:text-mikado-950 mt-auto mr-auto ml-0 flex w-fit items-center gap-2 border-b-2 border-transparent p-2 pl-0 transition-colors duration-300 group-focus-visible/card:border-black group-focus-visible/card:pl-2 group-focus-visible/card:text-black group-focus-visible/card:outline-2 dark:group-hover/card:border-white dark:group-hover/card:text-white"
      >
        <span>Read more</span>
        <Icon
          name="material-symbols:arrow-right-alt"
          height={16}
          width={16}
          class="transition-transform duration-300 ease-in-out group-hover/card:-rotate-45 group-focus/card:-rotate-45"
        />
      </span>
    </div>

    {
      image && (
        <Picture
          alt={image.alt ?? ""}
          class="aspect-video object-cover opacity-75 transition-opacity duration-300 group-hover/card:opacity-100 group-focus-visible/card:opacity-100"
          format="webp"
          loading={loading ?? "lazy"}
          sizes={imagesConfig.third.sizes}
          src={image.src}
          widths={imagesConfig.third.widths}
        />
      )
    }
  </a>
</li>
